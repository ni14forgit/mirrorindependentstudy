{"ast":null,"code":"var _jsxFileName = \"/Users/nishantiyengar/Desktop/mirrorindependentstudy/mirrorapp/src/Components/News/NewsApp.js\";\nimport React, { useState, useEffect } from \"react\";\nimport News from \"./News/News\";\nimport \"./News/News.css\";\n\nclass Story {\n  constructor(title, author, source, imageUrl) {\n    this.title = title;\n    this.author = author;\n    this.source = source;\n    this.imageUrl = imageUrl;\n  }\n\n}\n\nconst NewsApp = () => {\n  const [stories, setStories] = useState([]);\n  const [story, setStory] = useState(new Story(\"Collecting Information ...\", \"\", \"\", \"\"));\n  const [counter, setCounter] = useState(0);\n  const [visibility, setVisibility] = useState(true);\n\n  const getNews = async e => {\n    //console.log(\"hi\" + process.env.REACT_APP_API_KEY_NEWS);\n    setStories([]);\n    var url = \"http://newsapi.org/v2/top-headlines?country=us&apiKey=\" + process.env.REACT_APP_API_KEY_NEWS;\n    const api_call = await fetch(url);\n    const data = await api_call.json();\n    console.log(data);\n\n    for (var i = 0; i < data[\"articles\"].length; i++) {\n      const td = data[\"articles\"][i][\"title\"];\n      const ad = data[\"articles\"][i][\"author\"];\n      const sd = data[\"articles\"][i][\"source\"][\"name\"];\n      const id = data[\"articles\"][i][\"urlToImage\"]; // const titleData = td ? td : \"Title Not Specified\";\n      // const authorData = ad ? ad : \"Author Not Specified\";\n      // const sourceData = sd ? sd : \"Source Not Specified\";\n      // const imageUrlData = id ? id : \"Article Image Not Specified\";\n\n      const titleData = td ? td : \"\";\n      const authorData = ad ? ad : \"\";\n      const sourceData = sd ? sd : \"\";\n      const imageUrlData = id ? id : \"\";\n      const newstory = new Story(titleData, authorData, sourceData, imageUrlData);\n      setStories(oldArray => [...oldArray, newstory]);\n      console.log(stories.length);\n    }\n  };\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  const updateStory = async () => {\n    setVisibility(false);\n    await sleep(5000);\n    setStory(stories[counter]);\n    setCounter((counter + 1) % stories.length);\n    setVisibility(true);\n  };\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updateStory();\n    }, 10 * 1000);\n    return () => clearInterval(interval);\n  });\n  useEffect(() => {\n    getNews();\n  }, []);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      getNews();\n    }, 350 * 1000);\n    return () => clearInterval(interval);\n  });\n  return /*#__PURE__*/React.createElement(News, {\n    visi: visibility,\n    storyentry: story,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 10\n    }\n  });\n};\n\nexport default NewsApp;","map":{"version":3,"sources":["/Users/nishantiyengar/Desktop/mirrorindependentstudy/mirrorapp/src/Components/News/NewsApp.js"],"names":["React","useState","useEffect","News","Story","constructor","title","author","source","imageUrl","NewsApp","stories","setStories","story","setStory","counter","setCounter","visibility","setVisibility","getNews","e","url","process","env","REACT_APP_API_KEY_NEWS","api_call","fetch","data","json","console","log","i","length","td","ad","sd","id","titleData","authorData","sourceData","imageUrlData","newstory","oldArray","sleep","ms","Promise","resolve","setTimeout","updateStory","interval","setInterval","clearInterval"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAO,iBAAP;;AAEA,MAAMC,KAAN,CAAY;AACVC,EAAAA,WAAW,CAACC,KAAD,EAAQC,MAAR,EAAgBC,MAAhB,EAAwBC,QAAxB,EAAkC;AAC3C,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AACD;;AANS;;AASZ,MAAMC,OAAO,GAAG,MAAM;AACpB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAChC,IAAIG,KAAJ,CAAU,4BAAV,EAAwC,EAAxC,EAA4C,EAA5C,EAAgD,EAAhD,CADgC,CAAlC;AAGA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,CAAD,CAAtC;AACA,QAAM,CAACgB,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAC,IAAD,CAA5C;;AAEA,QAAMkB,OAAO,GAAG,MAAMC,CAAN,IAAW;AACzB;AACAR,IAAAA,UAAU,CAAC,EAAD,CAAV;AACA,QAAIS,GAAG,GACL,2DACAC,OAAO,CAACC,GAAR,CAAYC,sBAFd;AAGA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAD,CAA5B;AACA,UAAMM,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;;AACA,SAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,IAAI,CAAC,UAAD,CAAJ,CAAiBK,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAChD,YAAME,EAAE,GAAGN,IAAI,CAAC,UAAD,CAAJ,CAAiBI,CAAjB,EAAoB,OAApB,CAAX;AACA,YAAMG,EAAE,GAAGP,IAAI,CAAC,UAAD,CAAJ,CAAiBI,CAAjB,EAAoB,QAApB,CAAX;AACA,YAAMI,EAAE,GAAGR,IAAI,CAAC,UAAD,CAAJ,CAAiBI,CAAjB,EAAoB,QAApB,EAA8B,MAA9B,CAAX;AACA,YAAMK,EAAE,GAAGT,IAAI,CAAC,UAAD,CAAJ,CAAiBI,CAAjB,EAAoB,YAApB,CAAX,CAJgD,CAMhD;AACA;AACA;AACA;;AAEA,YAAMM,SAAS,GAAGJ,EAAE,GAAGA,EAAH,GAAQ,EAA5B;AACA,YAAMK,UAAU,GAAGJ,EAAE,GAAGA,EAAH,GAAQ,EAA7B;AACA,YAAMK,UAAU,GAAGJ,EAAE,GAAGA,EAAH,GAAQ,EAA7B;AACA,YAAMK,YAAY,GAAGJ,EAAE,GAAGA,EAAH,GAAQ,EAA/B;AAEA,YAAMK,QAAQ,GAAG,IAAIrC,KAAJ,CACfiC,SADe,EAEfC,UAFe,EAGfC,UAHe,EAIfC,YAJe,CAAjB;AAOA5B,MAAAA,UAAU,CAAC8B,QAAQ,IAAI,CAAC,GAAGA,QAAJ,EAAcD,QAAd,CAAb,CAAV;AACAZ,MAAAA,OAAO,CAACC,GAAR,CAAYnB,OAAO,CAACqB,MAApB;AACD;AACF,GAnCD;;AAqCA,WAASW,KAAT,CAAeC,EAAf,EAAmB;AACjB,WAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAUF,EAAV,CAAjC,CAAP;AACD;;AAED,QAAMI,WAAW,GAAG,YAAY;AAC9B9B,IAAAA,aAAa,CAAC,KAAD,CAAb;AACA,UAAMyB,KAAK,CAAC,IAAD,CAAX;AACA7B,IAAAA,QAAQ,CAACH,OAAO,CAACI,OAAD,CAAR,CAAR;AACAC,IAAAA,UAAU,CAAC,CAACD,OAAO,GAAG,CAAX,IAAgBJ,OAAO,CAACqB,MAAzB,CAAV;AACAd,IAAAA,aAAa,CAAC,IAAD,CAAb;AACD,GAND;;AAQAhB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM+C,QAAQ,GAAGC,WAAW,CAAC,MAAM;AACjCF,MAAAA,WAAW;AACZ,KAF2B,EAEzB,KAAK,IAFoB,CAA5B;AAGA,WAAO,MAAMG,aAAa,CAACF,QAAD,CAA1B;AACD,GALQ,CAAT;AAOA/C,EAAAA,SAAS,CAAC,MAAM;AACdiB,IAAAA,OAAO;AACR,GAFQ,EAEN,EAFM,CAAT;AAIAjB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM+C,QAAQ,GAAGC,WAAW,CAAC,MAAM;AACjC/B,MAAAA,OAAO;AACR,KAF2B,EAEzB,MAAM,IAFmB,CAA5B;AAGA,WAAO,MAAMgC,aAAa,CAACF,QAAD,CAA1B;AACD,GALQ,CAAT;AAOA,sBAAO,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAEhC,UAAZ;AAAwB,IAAA,UAAU,EAAEJ,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACD,CA5ED;;AA8EA,eAAeH,OAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport News from \"./News/News\";\nimport \"./News/News.css\";\n\nclass Story {\n  constructor(title, author, source, imageUrl) {\n    this.title = title;\n    this.author = author;\n    this.source = source;\n    this.imageUrl = imageUrl;\n  }\n}\n\nconst NewsApp = () => {\n  const [stories, setStories] = useState([]);\n  const [story, setStory] = useState(\n    new Story(\"Collecting Information ...\", \"\", \"\", \"\")\n  );\n  const [counter, setCounter] = useState(0);\n  const [visibility, setVisibility] = useState(true);\n\n  const getNews = async e => {\n    //console.log(\"hi\" + process.env.REACT_APP_API_KEY_NEWS);\n    setStories([]);\n    var url =\n      \"http://newsapi.org/v2/top-headlines?country=us&apiKey=\" +\n      process.env.REACT_APP_API_KEY_NEWS;\n    const api_call = await fetch(url);\n    const data = await api_call.json();\n    console.log(data);\n    for (var i = 0; i < data[\"articles\"].length; i++) {\n      const td = data[\"articles\"][i][\"title\"];\n      const ad = data[\"articles\"][i][\"author\"];\n      const sd = data[\"articles\"][i][\"source\"][\"name\"];\n      const id = data[\"articles\"][i][\"urlToImage\"];\n\n      // const titleData = td ? td : \"Title Not Specified\";\n      // const authorData = ad ? ad : \"Author Not Specified\";\n      // const sourceData = sd ? sd : \"Source Not Specified\";\n      // const imageUrlData = id ? id : \"Article Image Not Specified\";\n\n      const titleData = td ? td : \"\";\n      const authorData = ad ? ad : \"\";\n      const sourceData = sd ? sd : \"\";\n      const imageUrlData = id ? id : \"\";\n\n      const newstory = new Story(\n        titleData,\n        authorData,\n        sourceData,\n        imageUrlData\n      );\n\n      setStories(oldArray => [...oldArray, newstory]);\n      console.log(stories.length);\n    }\n  };\n\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  const updateStory = async () => {\n    setVisibility(false);\n    await sleep(5000);\n    setStory(stories[counter]);\n    setCounter((counter + 1) % stories.length);\n    setVisibility(true);\n  };\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      updateStory();\n    }, 10 * 1000);\n    return () => clearInterval(interval);\n  });\n\n  useEffect(() => {\n    getNews();\n  }, []);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      getNews();\n    }, 350 * 1000);\n    return () => clearInterval(interval);\n  });\n\n  return <News visi={visibility} storyentry={story}></News>;\n};\n\nexport default NewsApp;\n"]},"metadata":{},"sourceType":"module"}